# ðŸ“Š Ù…Ø±Ø§Ø¬Ø¹Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ - Leedz Platform
> **Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2026-01-08  
> **Ø§Ù„ØºØ±Ø¶:** Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ø£ØµÙ„ÙŠ + Ù…Ù†Ø§Ù‚Ø´Ø© Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ

---

## ðŸ“‹ Ø§Ù„ÙÙ‡Ø±Ø³

1. [Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ](#Ù…Ù„Ø®Øµ-ØªÙ†ÙÙŠØ°ÙŠ)
2. [Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ø§Ù„ÙˆØ§Ù‚Ø¹](#Ù…Ù‚Ø§Ø±Ù†Ø©-Ø§Ù„Ù…Ø®Ø·Ø·-Ø¨Ø§Ù„ÙˆØ§Ù‚Ø¹)
3. [Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡](#Ù…Ø§-ØªÙ…-Ø¥Ù†Ø¬Ø§Ø²Ù‡)
4. [Ù…Ø§ Ù‡Ùˆ Ù†Ø§Ù‚Øµ](#Ù…Ø§-Ù‡Ùˆ-Ù†Ø§Ù‚Øµ)
5. [Ù…Ø§ Ù„Ù… Ù†Ø¨Ø¯Ø£ ÙÙŠÙ‡](#Ù…Ø§-Ù„Ù…-Ù†Ø¨Ø¯Ø£-ÙÙŠÙ‡)
6. [ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Extension-Platform](#ÙÙƒØ±Ø©-Ø§Ù„Ø±Ø¨Ø·-Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ)
7. [Ø£Ø³Ø¦Ù„Ø© ØªØ­ØªØ§Ø¬ Ù‚Ø±Ø§Ø±](#Ø£Ø³Ø¦Ù„Ø©-ØªØ­ØªØ§Ø¬-Ù‚Ø±Ø§Ø±)

---

## ðŸŽ¯ Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ

### Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ù…Ø®Ø·Ø· (Ù…Ù† Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LEEDZ ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 â”‚   Job Plan   â”‚                                 â”‚   â”‚
â”‚  â”‚     BACKEND     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚      EXTENSION RUNNER           â”‚   â”‚
â”‚  â”‚   Orchestrator  â”‚              â”‚      Execution Engine           â”‚   â”‚
â”‚  â”‚                 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                 â”‚   â”‚
â”‚  â”‚  - Job Planning â”‚   Evidence   â”‚  - Executes in Browser Tabs     â”‚   â”‚
â”‚  â”‚  - RBAC/Audit   â”‚   Progress   â”‚  - Collects Evidence            â”‚   â”‚
â”‚  â”‚  - Multi-tenant â”‚   Logs       â”‚  - Sends Progress/Logs          â”‚   â”‚
â”‚  â”‚  - Reports Gen  â”‚              â”‚  - Handles Captcha/Blocks       â”‚   â”‚
â”‚  â”‚  - Storage      â”‚              â”‚                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â–²                                                               â”‚
â”‚          â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚  â”‚   WEB APP     â”‚                                                      â”‚
â”‚  â”‚   Dashboard   â”‚                                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

| Ø§Ù„Ù…ÙƒÙˆÙ† | Ø§Ù„Ù…Ø®Ø·Ø· | Ø§Ù„Ø­Ø§Ù„ÙŠ | Ø§Ù„Ù†Ø³Ø¨Ø© |
|--------|--------|--------|--------|
| **Backend API** | NestJS + Prisma + PostgreSQL | âœ… Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙŠØ¹Ù…Ù„ | 85% |
| **Web App** | React + Vite + Zustand | âœ… Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙŠØ¹Ù…Ù„ | 75% |
| **Extension** | MV3 + Side Panel + WebSocket | âš ï¸ Ø£Ø³Ø§Ø³ÙŠ ÙÙ‚Ø· | 25% |
| **Connectors** | google_maps, website_crawl, social_public | âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0% |
| **AI/Reports** | OpenAI/Gemini integration | âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0% |
| **WhatsApp** | Meta Business API | âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0% |

---

## ðŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø®Ø·Ø· Ø¨Ø§Ù„ÙˆØ§Ù‚Ø¹

### Backend API

| Ø§Ù„Ù…ÙŠØ²Ø© (Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø·) | Ø§Ù„Ø­Ø§Ù„Ø© | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|-------------------|--------|---------|
| Auth (JWT, Refresh) | âœ… | ÙŠØ¹Ù…Ù„ |
| Multi-tenant | âœ… | ÙŠØ¹Ù…Ù„ |
| RBAC (4 Ø£Ø¯ÙˆØ§Ø±) | âœ… | OWNER, ADMIN, MANAGER, SALES |
| Leads CRUD | âœ… | ÙŠØ¹Ù…Ù„ |
| Lists CRUD | âœ… | ÙŠØ¹Ù…Ù„ |
| Reports CRUD | âœ… | ÙŠØ¹Ù…Ù„ (Ø¨Ø¯ÙˆÙ† AI) |
| Jobs CRUD | âœ… | ÙŠØ¹Ù…Ù„ |
| Audit Logs | âœ… | ÙŠØ¹Ù…Ù„ |
| Plans & Subscriptions | âœ… | ÙŠØ¹Ù…Ù„ |
| Super Admin | âœ… | ÙŠØ¹Ù…Ù„ |
| WebSocket Gateway | âœ… | ÙŠØ¹Ù…Ù„ (Ø¬Ø¯ÙŠØ¯) |
| Job Dispatch | âœ… | ÙŠØ¹Ù…Ù„ (Ø¬Ø¯ÙŠØ¯) |
| Evidence Storage | âš ï¸ | Schema Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù„Ù… ÙŠÙØ®ØªØ¨Ø± |
| Report Generation (AI) | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| WhatsApp API | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| Usage Enforcement | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| `/extension/resolve` | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| `/extension/reveal` | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| `/agent/config` | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |

### Extension

| Ø§Ù„Ù…ÙŠØ²Ø© (Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø·) | Ø§Ù„Ø­Ø§Ù„Ø© | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|-------------------|--------|---------|
| Manifest V3 | âœ… | ÙŠØ¹Ù…Ù„ |
| Side Panel UI | âœ… | Ø£Ø³Ø§Ø³ÙŠ (Login ÙÙ‚Ø·) |
| Background Service Worker | âœ… | ÙŠØ¹Ù…Ù„ |
| WebSocket Connection | âœ… | ÙŠØ¹Ù…Ù„ (Ø¬Ø¯ÙŠØ¯) |
| Job Execution | âš ï¸ | Placeholder ÙÙ‚Ø· |
| Auth (Login/Logout) | âœ… | ÙŠØ¹Ù…Ù„ |
| Tenant Context | âš ï¸ | Ø¬Ø²Ø¦ÙŠ |
| **Connectors** | | |
| - google_maps | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - website_crawl | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - social_public | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - web_search | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| **Features** | | |
| - Resolve Page Entity | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Save to CRM | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Reveal Contact Data | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Deep Survey | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - WhatsApp Send | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| **Privacy** | | |
| - Execution Window | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Tab Isolation | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Evidence Sanitization | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| **Lifecycle** | | |
| - MV3 Keep-Alive | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Offline Queue | âŒ | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
| - Reconnect Strategy | âš ï¸ | Ø£Ø³Ø§Ø³ÙŠ |

### Web App

| Ø§Ù„Ù…ÙŠØ²Ø© (Ù…Ù† Ø§Ù„Ù…Ø®Ø·Ø·) | Ø§Ù„Ø­Ø§Ù„Ø© | Ù…Ù„Ø§Ø­Ø¸Ø§Øª |
|-------------------|--------|---------|
| Dashboard | âœ… | Ù…ØªØµÙ„ Ø¨Ù€ API |
| Login/Signup | âœ… | ÙŠØ¹Ù…Ù„ |
| Leads Management | âœ… | ÙŠØ¹Ù…Ù„ |
| Lists | âœ… | ÙŠØ¹Ù…Ù„ |
| Reports | âš ï¸ | UI Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø¨Ø¯ÙˆÙ† AI |
| Team Management | âš ï¸ | UI Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù„Ù… ÙŠÙØ®ØªØ¨Ø± |
| Settings | âš ï¸ | ÙŠØ­ØªØ§Ø¬ ØªÙ†Ø¸ÙŠÙ |
| Admin Panel | âœ… | ÙŠØ¹Ù…Ù„ |
| Prospecting | âš ï¸ | UI Ù…ÙˆØ¬ÙˆØ¯ØŒ ÙŠØ­ØªØ§Ø¬ Extension |
| WhatsApp | âŒ | UI ÙÙ‚Ø· |
| Integrations | âŒ | UI ÙÙ‚Ø· |

---

## âœ… Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡ (Ù…ÙƒØªÙ…Ù„)

### Backend
1. âœ… NestJS project structure
2. âœ… Prisma + Neon PostgreSQL
3. âœ… JWT Authentication
4. âœ… Multi-tenant architecture
5. âœ… RBAC with 4 roles
6. âœ… Leads, Lists, Reports, Jobs CRUD
7. âœ… Audit logging
8. âœ… Plans & Subscriptions system
9. âœ… Super Admin module
10. âœ… WebSocket Gateway for Extension
11. âœ… Job Dispatch endpoint

### Frontend
1. âœ… React + Vite + TypeScript
2. âœ… All 17+ pages
3. âœ… RTL Arabic support
4. âœ… Zustand state management
5. âœ… API client connected to backend
6. âœ… Admin Panel

### Extension
1. âœ… Manifest V3 structure
2. âœ… Background service worker
3. âœ… Side Panel with login
4. âœ… WebSocket connection to backend
5. âœ… Job receive/acknowledge

---

## âš ï¸ Ù…Ø§ Ù‡Ùˆ Ù†Ø§Ù‚Øµ (Ø¨Ø¯Ø£Ù†Ø§ ÙÙŠÙ‡ Ù„ÙƒÙ† ØºÙŠØ± Ù…ÙƒØªÙ…Ù„)

### Extension (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰)

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø­Ø§Ù„Ø© | Ù…Ø§ ÙŠÙ†Ù‚Øµ |
|--------|--------|---------|
| Job Execution | 20% | Connectors Ø§Ù„ÙØ¹Ù„ÙŠØ© |
| Side Panel UI | 30% | Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù€ Views (Overview, Contacts, Evidence) |
| Resolve Page | 0% | ÙƒÙ„ Ø´ÙŠØ¡ |
| Evidence Collection | 0% | ÙƒÙ„ Ø´ÙŠØ¡ |
| Execution Window | 0% | Tab isolation |

### Backend

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø­Ø§Ù„Ø© | Ù…Ø§ ÙŠÙ†Ù‚Øµ |
|--------|--------|---------|
| Evidence Storage | 50% | Upload endpoint, validation |
| Usage Enforcement | 0% | Middleware Ù„Ù„Ø­Ø¯ÙˆØ¯ |
| Extension API | 0% | `/extension/resolve`, `/extension/reveal` |

### Web App

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø­Ø§Ù„Ø© | Ù…Ø§ ÙŠÙ†Ù‚Øµ |
|--------|--------|---------|
| Settings Page | 50% | ØªÙ†Ø¸ÙŠÙ (Ø¥Ø²Ø§Ù„Ø© Google API Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¹Ø§Ø¯ÙŠ) |
| Prospecting | 30% | Ø±Ø¨Ø· Ø¨Ù€ Extension |
| Reports | 40% | AI integration |

---

## âŒ Ù…Ø§ Ù„Ù… Ù†Ø¨Ø¯Ø£ ÙÙŠÙ‡ Ø¨Ø¹Ø¯

### P0 (Critical)

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø³Ø¨Ø¨ |
|--------|-------|
| **Connectors** (google_maps, website_crawl, social_public) | Ù‚Ù„Ø¨ Ø§Ù„Ù€ Extension |
| **Execution Window** | Privacy requirement |
| **Evidence Collection & Upload** | Core functionality |
| **Resolve Page Entity** | Ø£ÙˆÙ„ Ø®Ø·ÙˆØ© ÙÙŠ Extension flow |

### P1 (High)

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø³Ø¨Ø¨ |
|--------|-------|
| **AI Report Generation** | OpenAI/Gemini integration |
| **Usage Enforcement** | Billing/Quotas |
| **Reveal Contact Data** | Premium feature |
| **MV3 Lifecycle** | Keep-alive, offline queue |

### P2 (Medium)

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø³Ø¨Ø¨ |
|--------|-------|
| **WhatsApp Business API** | External integration |
| **Email Verification** | Security |
| **Password Reset (real)** | Security |
| **CSV Import/Export** | Data management |

### P3 (Low)

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ø³Ø¨Ø¨ |
|--------|-------|
| **CRM Integrations** (Salesforce, HubSpot) | External |
| **Mobile App** | Optional |
| **Chrome Web Store** | After completion |

---

## ðŸ”— ÙÙƒØ±Ø© Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Extension-Platform

### Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø£ØµÙ„ÙŠØ© (Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)

> "Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù…Ø¬Ø±Ø¯ ØªØ«Ø¨ÙŠØªÙ‡Ø§ ÙˆØªØ´ØºÙŠÙ„Ù‡Ø§ ØªÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù€ API Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…Ù†ØµØ© ÙˆØªØªØ­Ù‚Ù‚ Ù…Ø§ Ø¥Ù† ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø§Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ù… Ù„Ø§. Ù„Ùˆ Ù‚Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙÙ‡ÙŠ ØªÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ°Ù„Ùƒ ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙŠÙˆØ²Ø±."

### Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ù†ÙŠ

#### Ø§Ù„Ø®ÙŠØ§Ø± 1: Cookie/Session Sharing âŒ (ØºÙŠØ± Ù…ÙˆØµÙ‰ Ø¨Ù‡)

```
Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
- Chrome Extensions Ù„Ø§ ØªØ³ØªØ·ÙŠØ¹ Ù‚Ø±Ø§Ø¡Ø© cookies Ù…Ù† domains Ø£Ø®Ø±Ù‰ Ø¨Ø³Ù‡ÙˆÙ„Ø©
- ÙŠØªØ·Ù„Ø¨ host_permissions Ø¹Ù„Ù‰ domain Ø§Ù„Ù…Ù†ØµØ©
- Ù…Ø®Ø§Ø·Ø± Ø£Ù…Ù†ÙŠØ© (token exposure)
- Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¥Ø°Ø§ Ø§Ù„Ù…Ù†ØµØ© Ø¹Ù„Ù‰ domain Ù…Ø®ØªÙ„Ù
```

#### Ø§Ù„Ø®ÙŠØ§Ø± 2: Shared Token via chrome.storage âš ï¸ (Ù…Ù…ÙƒÙ† Ù„ÙƒÙ† Ù…Ø¹Ù‚Ø¯)

```
Ø§Ù„ÙÙƒØ±Ø©:
1. Web App ÙŠÙƒØªØ¨ token ÙÙŠ chrome.storage (Ø¹Ø¨Ø± content script)
2. Extension ÙŠÙ‚Ø±Ø£ Ù…Ù† chrome.storage

Ø§Ù„Ù…Ø´Ø§ÙƒÙ„:
- ÙŠØ­ØªØ§Ø¬ content script Ø¹Ù„Ù‰ domain Ø§Ù„Ù…Ù†ØµØ©
- ÙŠØ­ØªØ§Ø¬ ØªÙ†Ø³ÙŠÙ‚ Ø¨ÙŠÙ† Web Ùˆ Extension
- Ù…Ø¹Ù‚Ø¯ ÙÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø©
```

#### Ø§Ù„Ø®ÙŠØ§Ø± 3: Platform URL Detection âœ… (Ù…ÙˆØµÙ‰ Ø¨Ù‡)

```
Ø§Ù„ÙÙƒØ±Ø©:
1. Extension ÙŠØ¹Ø±Ù URL Ø§Ù„Ù…Ù†ØµØ© (Ù…Ù† config Ø£Ùˆ hardcoded)
2. Ø¹Ù†Ø¯ ÙØªØ­ ExtensionØŒ ÙŠØªØ­Ù‚Ù‚:
   - Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØµØ©ØŸ
   - Ù‡Ù„ Ù‡Ù†Ø§Ùƒ token ÙÙŠ localStorage Ù„Ù„Ù…Ù†ØµØ©ØŸ
3. Ø¥Ø°Ø§ Ù†Ø¹Ù…ØŒ ÙŠØ³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ù€ token

Ø§Ù„ØªÙ†ÙÙŠØ°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTO-LOGIN FLOW                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. Extension Startup                                                   â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  2. Check chrome.storage for existing token                             â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â”œâ”€â”€ Token exists? â†’ Verify with API â†’ Use if valid                 â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â””â”€â”€ No token? â†’ Check if on Platform URL                           â”‚
â”‚         â”‚                                                                â”‚
â”‚         â–¼                                                                â”‚
â”‚  3. If on Platform URL (e.g., app.leedz.sa)                            â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  4. Inject content script to read localStorage                          â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  5. Get token from Web App's localStorage                               â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  6. Store in chrome.storage + auto-login                                â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Ø§Ù„Ø®ÙŠØ§Ø± 4: Deep Link / OAuth-like Flow âœ… (Ø§Ù„Ø£ÙØ¶Ù„)

```
Ø§Ù„ÙÙƒØ±Ø©:
1. Extension ÙŠØ¹Ø±Ø¶ Ø²Ø± "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø§Ù„Ù…Ù†ØµØ©"
2. ÙŠÙØªØ­ tab Ù„Ù„Ù…Ù†ØµØ© Ù…Ø¹ redirect URL Ø®Ø§Øµ
3. Ø§Ù„Ù…Ù†ØµØ© ØªØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© ÙˆØªØ±Ø³Ù„ token Ù„Ù„Ù€ Extension
4. Extension ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù€ token ÙˆÙŠØ®Ø²Ù†Ù‡

Ø§Ù„ØªÙ†ÙÙŠØ°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OAUTH-LIKE FLOW                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. User clicks "Login via Platform" in Extension                       â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  2. Extension opens: https://app.leedz.sa/auth/extension-login          â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  3. Platform checks if user is logged in                                â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â”œâ”€â”€ Logged in? â†’ Generate extension token                          â”‚
â”‚     â”‚               â†’ Redirect to: chrome-extension://ID/callback       â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â””â”€â”€ Not logged in? â†’ Show login form                                â”‚
â”‚                        â†’ After login, generate token                    â”‚
â”‚                        â†’ Redirect to extension                          â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  4. Extension receives token via callback page                          â”‚
â”‚     â”‚                                                                    â”‚
â”‚     â–¼                                                                    â”‚
â”‚  5. Extension stores token and shows logged-in state                    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ø§Ù„ØªÙˆØµÙŠØ©

**Ø§Ù„Ø®ÙŠØ§Ø± 4 (OAuth-like)** Ù‡Ùˆ Ø§Ù„Ø£ÙØ¶Ù„ Ù„Ø£Ù†Ù‡:
1. âœ… Ø¢Ù…Ù† (Ù„Ø§ ÙŠØªØ·Ù„Ø¨ Ù‚Ø±Ø§Ø¡Ø© localStorage Ù…Ù† domain Ø¢Ø®Ø±)
2. âœ… Standard pattern (Ù…Ø«Ù„ "Login with Google")
3. âœ… ÙŠØ¹Ù…Ù„ Ø­ØªÙ‰ Ù„Ùˆ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„ÙŠØ³ Ø¹Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØµØ©
4. âœ… Ø³Ù‡Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø©
5. âœ… ÙŠØ¯Ø¹Ù… SSO ÙÙŠ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„

---

## â“ Ø£Ø³Ø¦Ù„Ø© ØªØ­ØªØ§Ø¬ Ù‚Ø±Ø§Ø±

### 1. Ø§Ù„Ø±Ø¨Ø· Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ

> **Ø§Ù„Ø³Ø¤Ø§Ù„:** Ø£ÙŠ Ø®ÙŠØ§Ø± ØªÙØ¶Ù„ Ù„Ù„Ø±Ø¨Ø· Ø¨ÙŠÙ† Extension ÙˆØ§Ù„Ù…Ù†ØµØ©ØŸ
> - Ø§Ù„Ø®ÙŠØ§Ø± 3: Platform URL Detection (Ø£Ø¨Ø³Ø·)
> - Ø§Ù„Ø®ÙŠØ§Ø± 4: OAuth-like Flow (Ø£ÙØ¶Ù„ Ø£Ù…Ù†ÙŠØ§Ù‹)

### 2. Ø§Ù„ØªØ§Ø¨Ø§Øª Ø§Ù„Ù…Ø®ÙÙŠØ© (Execution Window)

> **Ø§Ù„Ø³Ø¤Ø§Ù„:** Ø§Ù„Ù…Ø®Ø·Ø· ÙŠÙ‚ÙˆÙ„ Ø£Ù† Ø§Ù„Ù€ Extension ÙŠÙØªØ­ Ù†Ø§ÙØ°Ø© Ù…Ù†ÙØµÙ„Ø© (minimized) Ù„Ù„ØªÙ†ÙÙŠØ°.
> - Ù‡Ù„ ØªØ±ÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„Ø³Ù„ÙˆÙƒØŸ
> - Ø£Ù… ØªÙØ¶Ù„ Ø§Ù„ØªÙ†ÙÙŠØ° ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¨Ø¯ÙˆÙ† Ù†Ø§ÙØ°Ø© Ù…Ø±Ø¦ÙŠØ©ØŸ

### 3. Connectors Priority

> **Ø§Ù„Ø³Ø¤Ø§Ù„:** Ø£ÙŠ Connector Ù†Ø¨Ø¯Ø£ Ø¨Ù‡ Ø£ÙˆÙ„Ø§Ù‹ØŸ
> 1. `google_maps` - Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø®Ø±Ø§Ø¦Ø· Ø¬ÙˆØ¬Ù„
> 2. `website_crawl` - ÙØ­Øµ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
> 3. `social_public` - LinkedIn public profiles

### 4. Platform URL

> **Ø§Ù„Ø³Ø¤Ø§Ù„:** Ù…Ø§ Ù‡Ùˆ URL Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØŸ
> - Ù…Ø«Ø§Ù„: `https://app.leedz.sa`
> - Ù‡Ø°Ø§ Ù…Ù‡Ù… Ù„Ù€:
>   - host_permissions ÙÙŠ manifest
>   - Auto-login detection
>   - CORS configuration

### 5. Super Admin Platform URL

> **Ø§Ù„Ø³Ø¤Ø§Ù„:** Ù‡Ù„ ØªØ±ÙŠØ¯ Ø£Ù† ÙŠÙƒÙˆÙ† URL Ø§Ù„Ù…Ù†ØµØ© Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† Super Admin PanelØŸ
> - Ø£Ù… ÙŠÙƒÙˆÙ† hardcoded ÙÙŠ Ø§Ù„Ù€ ExtensionØŸ

---

## ðŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©

### Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­

```
Phase 6: Extension Full Integration
â”œâ”€â”€ 6.1: Extension Auto-Login (OAuth-like flow)
â”œâ”€â”€ 6.2: Extension API endpoints (/extension/resolve, /extension/reveal)
â”œâ”€â”€ 6.3: Execution Window + Tab Isolation
â”œâ”€â”€ 6.4: Google Maps Connector
â”œâ”€â”€ 6.5: Website Crawl Connector
â”œâ”€â”€ 6.6: Evidence Collection & Upload
â”œâ”€â”€ 6.7: Side Panel Full UI
â””â”€â”€ 6.8: Testing & Polish

Phase 7: AI & Reports
â”œâ”€â”€ 7.1: OpenAI/Gemini integration
â”œâ”€â”€ 7.2: Report Generation
â””â”€â”€ 7.3: AI Message Writing

Phase 8: WhatsApp & Integrations
â”œâ”€â”€ 8.1: WhatsApp Business API
â”œâ”€â”€ 8.2: Usage Enforcement
â””â”€â”€ 8.3: Email Verification
```

---

## ðŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„ÙØ¬ÙˆØ§Øª

| Ø§Ù„ÙØ¦Ø© | Ù…ÙƒØªÙ…Ù„ | Ù†Ø§Ù‚Øµ | Ù„Ù… ÙŠØ¨Ø¯Ø£ |
|-------|-------|------|---------|
| Backend | 85% | 10% | 5% |
| Web App | 75% | 15% | 10% |
| Extension | 25% | 5% | 70% |
| Connectors | 0% | 0% | 100% |
| AI/Reports | 0% | 0% | 100% |
| WhatsApp | 0% | 0% | 100% |

**Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰:** Ø¥ÙƒÙ…Ø§Ù„ Extension (Connectors + Evidence + Full UI)

---

> **Ù…Ù„Ø§Ø­Ø¸Ø©:** Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙŠØ¹ÙƒØ³ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆÙŠØ­ØªØ§Ø¬ Ù‚Ø±Ø§Ø±Ø§Øª Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.
