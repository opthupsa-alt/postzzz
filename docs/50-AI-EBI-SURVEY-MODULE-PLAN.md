# Ø®Ø·Ø© Ù…ÙˆØ¯ÙŠÙˆÙ„ Ø§Ù„Ø³ÙŠØ±ÙÙŠÙ‡ (AI EBI Survey Module)

> **Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 1.0  
> **Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2026-01-09  
> **Ø§Ù„Ø­Ø§Ù„Ø©:** Ù…Ø³ÙˆØ¯Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©

---

## ğŸ“‹ Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ

Ù…ÙˆØ¯ÙŠÙˆÙ„ Ø§Ù„Ø³ÙŠØ±ÙÙŠÙ‡ Ù‡Ùˆ Ù†Ø¸Ø§Ù… ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† (Leads) ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (ChatGPT 5.2 Thinking) Ù„Ø¥Ù†ØªØ§Ø¬ ØªÙ‚Ø§Ø±ÙŠØ± Evidence-Based Ø´Ø§Ù…Ù„Ø© ØªØ³Ø§Ø¹Ø¯ Ù…Ù†Ø¯ÙˆØ¨ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø¹Ù„Ù‰ ÙÙ‡Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ§ÙƒØªØ´Ø§Ù Ø§Ù„ÙØ±Øµ ÙˆØ§Ù‚ØªØ±Ø§Ø­ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©.

### Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:
1. **ØªØ­Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„** Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙ…Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… AI
2. **ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ù†Ø¸Ù…Ø©** Ù…Ø¹ Ø£Ø¯Ù„Ø© ÙˆÙ…ØµØ§Ø¯Ø±
3. **ØªÙƒØ§Ù…Ù„ ÙƒØ§Ù…Ù„** Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (Leads, Reports, Jobs)
4. **Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ²ÙŠØ©** Ù…Ù† Ù„ÙˆØ­Ø© Super Admin
5. **ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ** Ù„ÙƒÙ„ Tenant

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Frontend (React)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  LeadDetailPage â”‚    â”‚  SurveyReport   â”‚    â”‚  Super Admin Settings       â”‚  â”‚
â”‚  â”‚  - Ø²Ø± Ø³ÙŠØ±ÙÙŠÙ‡    â”‚    â”‚  Viewer         â”‚    â”‚  - AI Provider Config       â”‚  â”‚
â”‚  â”‚  - Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± â”‚    â”‚  - Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±  â”‚    â”‚  - Prompts Management       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  - Usage Monitoring         â”‚  â”‚
â”‚           â”‚                      â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚
            â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Backend API (NestJS)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        SurveyModule                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ SurveyControllerâ”‚  â”‚ SurveyService   â”‚  â”‚ AIProviderService       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ - POST /survey  â”‚  â”‚ - createSurvey  â”‚  â”‚ - OpenAI Integration    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ - GET /survey   â”‚  â”‚ - processQueue  â”‚  â”‚ - Gemini (future)       â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - parseResponse â”‚  â”‚ - Rate Limiting         â”‚  â”‚    â”‚
â”‚  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     PromptTemplateEngine                                 â”‚    â”‚
â”‚  â”‚  - Ù‚Ø±Ø§Ø¡Ø© System Prompt Ù…Ù† DB                                            â”‚    â”‚
â”‚  â”‚  - Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ User Prompt                                     â”‚    â”‚
â”‚  â”‚  - ØªØ¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª Lead                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     Background Job Processor (Bull/Agenda)               â”‚    â”‚
â”‚  â”‚  - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙÙŠÙ‡ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©                                     â”‚    â”‚
â”‚  â”‚  - Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„                                           â”‚    â”‚
â”‚  â”‚  - Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØ´Ù„                                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              External Services                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  OpenAI API (ChatGPT 5.2 Thinking)                                       â”‚    â”‚
â”‚  â”‚  - Model: gpt-4.5-turbo-thinking (Ø£Ùˆ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙØ¹Ù„ÙŠ)                       â”‚    â”‚
â”‚  â”‚  - Web Search: Ù…ÙØ¹Ù‘Ù„                                                     â”‚    â”‚
â”‚  â”‚  - Max Tokens: Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ù† Super Admin                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Prisma Schema)

### 1. Ø¬Ø¯ÙˆÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI (AISettings)

```prisma
// ==================== AI Settings (Super Admin) ====================

enum AIProvider {
  OPENAI
  GEMINI
  ANTHROPIC
  CUSTOM
}

model AISettings {
  id              String      @id @default("default")
  
  // Provider Configuration
  provider        AIProvider  @default(OPENAI)
  modelName       String      @default("gpt-4.5-turbo")
  apiKey          String?     // Encrypted
  apiEndpoint     String?     // For custom providers
  
  // Model Parameters
  maxTokens       Int         @default(8000)
  temperature     Float       @default(0.7)
  enableWebSearch Boolean     @default(true)
  
  // Prompts
  systemPrompt    String      @db.Text
  userPromptTemplate String   @db.Text
  
  // Rate Limits
  maxRequestsPerMinute  Int   @default(10)
  maxRequestsPerDay     Int   @default(1000)
  
  // Cost Tracking
  estimatedCostPerRequest Decimal @default(0.50) @db.Decimal(10, 4)
  
  updatedAt       DateTime    @updatedAt
  updatedById     String?
  
  @@map("ai_settings")
}
```

### 2. ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Report

```prisma
// ØªØ­Ø¯ÙŠØ« ReportType
enum ReportType {
  LEAD_ANALYSIS
  COMPANY_PROFILE
  MARKET_RESEARCH
  COMPETITOR_ANALYSIS
  AI_EBI_SURVEY        // Ø¬Ø¯ÙŠØ¯
}

// ØªØ­Ø¯ÙŠØ« model Report
model Report {
  id              String       @id @default(uuid())
  tenantId        String
  leadId          String?
  type            ReportType
  status          ReportStatus @default(PENDING)
  title           String
  
  // AI EBI Survey Fields (Ø¬Ø¯ÙŠØ¯)
  aiProvider      AIProvider?
  aiModel         String?
  promptTokens    Int?
  completionTokens Int?
  totalTokens     Int?
  processingTimeMs Int?
  
  // Structured Content (Ø¬Ø¯ÙŠØ¯)
  executiveSummary    Json?     // Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ
  identityAnchors     Json?     // ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‡ÙˆÙŠØ©
  digitalFootprint    Json?     // Ø¬Ø±Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ
  gapAnalysis         Json?     // ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙØ¬ÙˆØ§Øª
  priorities          Json?     // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
  serviceMapping      Json?     // Ø®Ø¯Ù…Ø§Øª OP-Target
  packages            Json?     // Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©
  competitors         Json?     // Ø§Ù„Ù…Ù†Ø§ÙØ³ÙˆÙ†
  salesEnablement     Json?     // Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨
  crmCard             Json?     // Ø¨Ø·Ø§Ù‚Ø© CRM
  
  // Raw Content
  content         Json?         // Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„ ÙƒÙ€ JSON
  rawResponse     String?  @db.Text  // Ø§Ø³ØªØ¬Ø§Ø¨Ø© AI Ø§Ù„Ø®Ø§Ù…
  
  pdfUrl          String?
  error           String?
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  completedAt     DateTime?
  createdById     String

  tenant          Tenant       @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  lead            Lead?        @relation(fields: [leadId], references: [id])
  createdBy       User         @relation(fields: [createdById], references: [id])

  @@index([tenantId, status])
  @@index([tenantId, createdAt])
  @@index([leadId])
  @@map("reports")
}
```

### 3. Ø¬Ø¯ÙˆÙ„ ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ (SurveyUsage)

```prisma
model SurveyUsage {
  id              String   @id @default(uuid())
  tenantId        String
  userId          String
  reportId        String
  
  // Usage Metrics
  tokensUsed      Int
  estimatedCost   Decimal  @db.Decimal(10, 4)
  processingTimeMs Int
  
  // Timestamps
  createdAt       DateTime @default(now())
  
  tenant          Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  user            User     @relation(fields: [userId], references: [id])
  
  @@index([tenantId, createdAt])
  @@index([userId, createdAt])
  @@map("survey_usage")
}
```

### 4. ØªØ­Ø¯ÙŠØ« Plan Ù„Ø¥Ø¶Ø§ÙØ© Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø³ÙŠØ±ÙÙŠÙ‡

```prisma
model Plan {
  // ... Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ...
  
  // Survey Limits (Ø¬Ø¯ÙŠØ¯)
  surveysLimit    Int      @default(-1)  // -1 = unlimited
  
  // ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ ...
}
```

---

## ğŸ”Œ API Endpoints

### 1. Survey Endpoints

```typescript
// POST /api/survey/generate
// Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø³ÙŠØ±ÙÙŠÙ‡ Ø¬Ø¯ÙŠØ¯
{
  leadId: string;           // Ø¥Ù„Ø²Ø§Ù…ÙŠ
  priority?: 'normal' | 'high';  // Ø§Ø®ØªÙŠØ§Ø±ÙŠ
}
// Response: { jobId: string, reportId: string, message: string }

// GET /api/survey/:reportId
// Ø¬Ù„Ø¨ ØªÙ‚Ø±ÙŠØ± Ø³ÙŠØ±ÙÙŠÙ‡
// Response: { report: Report, status: ReportStatus }

// GET /api/survey/:reportId/status
// Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙ‚Ø·
// Response: { status: ReportStatus, progress: number, message: string }

// POST /api/survey/:reportId/regenerate
// Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
// Response: { jobId: string, message: string }

// GET /api/survey/usage
// Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ù„Ù€ Tenant Ø§Ù„Ø­Ø§Ù„ÙŠ
// Response: { thisMonth: number, total: number, limit: number }
```

### 2. Admin AI Settings Endpoints

```typescript
// GET /api/admin/ai-settings
// Ø¬Ù„Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI (Super Admin ÙÙ‚Ø·)

// PUT /api/admin/ai-settings
// ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI
{
  provider: 'OPENAI' | 'GEMINI' | 'ANTHROPIC' | 'CUSTOM';
  modelName: string;
  apiKey: string;
  maxTokens: number;
  temperature: number;
  enableWebSearch: boolean;
  systemPrompt: string;
  userPromptTemplate: string;
  maxRequestsPerMinute: number;
  maxRequestsPerDay: number;
}

// POST /api/admin/ai-settings/test
// Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ AI Provider
{
  testPrompt?: string;
}
// Response: { success: boolean, response?: string, error?: string, tokensUsed?: number }

// GET /api/admin/ai-settings/usage-stats
// Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ø©
// Response: { totalRequests, totalTokens, totalCost, byTenant: [...] }
```

---

## ğŸ¨ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UI Components)

### 1. ØªØ­Ø¯ÙŠØ« LeadDetailPage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â† Ø±Ø¬ÙˆØ¹]  Ø´Ø±ÙƒØ© Ø§Ù„Ø£Ù…Ù„ Ù„Ù„ØªÙ‚Ù†ÙŠØ©                    [Ø­Ø°Ù] [Ø³ÙŠØ±ÙÙŠÙ‡]â”‚
â”‚            ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª â€¢ Ø§Ù„Ø±ÙŠØ§Ø¶                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©] [Ø§Ù„Ø£Ø¯Ù„Ø©] [Ø§Ù„ØªÙ‚Ø±ÙŠØ±] [Ø§Ù„Ù†Ø´Ø§Ø·]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø³ÙŠØ±ÙÙŠÙ‡":                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± AI EBI...                          â”‚    â”‚
â”‚  â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 45%        â”‚    â”‚
â”‚  â”‚  Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø±Ù‚Ù…ÙŠØ©...                            â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  â±ï¸ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: 2-3 Ø¯Ù‚Ø§Ø¦Ù‚                            â”‚    â”‚
â”‚  â”‚  ğŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ù…ØªØ§Ø¨Ø¹Ø© Ø¹Ù…Ù„ÙƒØŒ Ø³Ù†Ø±Ø³Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. SurveyReportViewer Component (Ø¬Ø¯ÙŠØ¯)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ØªÙ‚Ø±ÙŠØ± AI EBI - Ø´Ø±ÙƒØ© Ø§Ù„Ø£Ù…Ù„ Ù„Ù„ØªÙ‚Ù†ÙŠØ©                              â”‚
â”‚  ğŸ“… 2026-01-09  â±ï¸ 2:34 Ø¯Ù‚ÙŠÙ‚Ø©  ğŸ”¢ 4,521 tokens                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“‹ Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Ø§Ù„Ø´Ø±ÙƒØ© Ù„Ø¯ÙŠÙ‡Ø§ Ø­Ø¶ÙˆØ± Ø±Ù‚Ù…ÙŠ Ø¶Ø¹ÙŠÙ Ù†Ø³Ø¨ÙŠØ§Ù‹                    â”‚    â”‚
â”‚  â”‚ â€¢ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆÙ‚Ø¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø±Ø³Ù…ÙŠ                            â”‚    â”‚
â”‚  â”‚ â€¢ Ø­Ø³Ø§Ø¨ Instagram Ù†Ø´Ø· Ù„ÙƒÙ† Ø¨Ø¯ÙˆÙ† Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ÙˆØ§Ø¶Ø­Ø©         â”‚    â”‚
â”‚  â”‚ â€¢ ØªÙ‚ÙŠÙŠÙ… Google Maps: 4.2 (23 Ù…Ø±Ø§Ø¬Ø¹Ø©)                    â”‚    â”‚
â”‚  â”‚ â€¢ ÙØ±ØµØ© ÙƒØ¨ÙŠØ±Ø© Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¸Ù‡ÙˆØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ¯ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø«Ù‚Ø©: Ø¹Ø§Ù„ÙŠØ© âœ“                                         â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚
â”‚                                                                 â”‚
â”‚  [ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‡ÙˆÙŠØ©] [Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ] [Ø§Ù„ÙØ¬ÙˆØ§Øª] [Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª]          â”‚
â”‚  [Ø§Ù„Ø®Ø¯Ù…Ø§Øª] [Ø§Ù„Ø¨Ø§Ù‚Ø§Øª] [Ø§Ù„Ù…Ù†Ø§ÙØ³ÙˆÙ†] [Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨] [CRM]          â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  ğŸ” ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‡ÙˆÙŠØ© (Identity Anchors)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ âœ“ Ø§Ù„Ø§Ø³Ù…: Ø´Ø±ÙƒØ© Ø§Ù„Ø£Ù…Ù„ Ù„Ù„ØªÙ‚Ù†ÙŠØ©                             â”‚    â”‚
â”‚  â”‚ âœ“ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: Ø§Ù„Ø±ÙŠØ§Ø¶                                       â”‚    â”‚
â”‚  â”‚ âœ“ Ø§Ù„Ù‡Ø§ØªÙ: 0112345678 (Ù…Ø¤ÙƒØ¯ Ù…Ù† Google Maps)              â”‚    â”‚
â”‚  â”‚ âš ï¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯                                    â”‚    â”‚
â”‚  â”‚ âœ“ Instagram: @alamal_tech (Ù…Ø¤ÙƒØ¯)                        â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚ ğŸ“Œ ÙƒÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ¨Ø¹Ø¯Ø©:                                       â”‚    â”‚
â”‚  â”‚ - Ø´Ø±ÙƒØ© Ø§Ù„Ø£Ù…Ù„ Ù„Ù„Ù…Ù‚Ø§ÙˆÙ„Ø§Øª (Ù…Ø¯ÙŠÙ†Ø© Ù…Ø®ØªÙ„ÙØ©)                   â”‚    â”‚
â”‚  â”‚ - Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø£Ù…Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ© (Ù†Ø´Ø§Ø· Ù…Ø®ØªÙ„Ù)                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š Ø¬Ø±Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Ø§Ù„Ù…Ù†ØµØ©      â”‚ Ø§Ù„Ø­Ø§Ù„Ø©   â”‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„                       â”‚    â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    â”‚
â”‚  â”‚ Website     â”‚ âŒ ØºØ§Ø¦Ø¨  â”‚ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆÙ‚Ø¹ Ø±Ø³Ù…ÙŠ              â”‚    â”‚
â”‚  â”‚ Google Maps â”‚ âœ“ Ù…ÙˆØ¬ÙˆØ¯ â”‚ 4.2â˜… (23 Ù…Ø±Ø§Ø¬Ø¹Ø©)               â”‚    â”‚
â”‚  â”‚ Instagram   â”‚ âœ“ Ù†Ø´Ø·   â”‚ 1.2K Ù…ØªØ§Ø¨Ø¹ØŒ Ø¢Ø®Ø± Ù†Ø´Ø±: Ø£Ù…Ø³       â”‚    â”‚
â”‚  â”‚ X/Twitter   â”‚ âŒ ØºØ§Ø¦Ø¨  â”‚ Ù„Ù… ÙŠÙØ¹Ø«Ø± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨              â”‚    â”‚
â”‚  â”‚ LinkedIn    â”‚ âš ï¸ Ø¶Ø¹ÙŠÙ â”‚ ØµÙØ­Ø© Ù‚Ø¯ÙŠÙ…Ø©ØŒ 45 Ù…ØªØ§Ø¨Ø¹           â”‚    â”‚
â”‚  â”‚ TikTok      â”‚ âŒ ØºØ§Ø¦Ø¨  â”‚ Ù„Ù… ÙŠÙØ¹Ø«Ø± Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…)                                             â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ğŸ“¥ ØªØµØ¯ÙŠØ± PDF]  [ğŸ“‹ Ù†Ø³Ø® Ø¨Ø·Ø§Ù‚Ø© CRM]  [ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Super Admin - AI Settings Page (Ø¬Ø¯ÙŠØ¯)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (AI EBI)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ”Œ Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Provider: [OpenAI â–¼]                                    â”‚    â”‚
â”‚  â”‚ Model:    [gpt-4.5-turbo-thinking â–¼]                    â”‚    â”‚
â”‚  â”‚ API Key:  [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [ğŸ‘ï¸]                   â”‚    â”‚
â”‚  â”‚ Status:   ğŸŸ¢ Ù…ØªØµÙ„                                       â”‚    â”‚
â”‚  â”‚           [ğŸ”„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„]                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  âš¡ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ù…ÙˆØ°Ø¬                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Max Tokens:     [8000    ]                              â”‚    â”‚
â”‚  â”‚ Temperature:    [0.7     ] â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  â”‚    â”‚
â”‚  â”‚ Web Search:     [âœ“] ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ System Prompt                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Ø£Ù†Øª "Ù…Ø­Ø±Ùƒ AI EBI" Ù„ØµØ§Ù„Ø­ Ø´Ø±ÙƒØ© Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ù„ØªØ³ÙˆÙŠÙ‚...   â”‚    â”‚
â”‚  â”‚ ...                                                     â”‚    â”‚
â”‚  â”‚ [Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„] [ØªØ¹Ø¯ÙŠÙ„]                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ User Prompt Template                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Ù†ÙÙ‘Ø° ØªÙ‚Ø±ÙŠØ± AI EBI ÙƒØ§Ù…Ù„ Ø¹Ù† Ø§Ù„ÙƒÙŠØ§Ù† Ø§Ù„ØªØ§Ù„ÙŠ:               â”‚    â”‚
â”‚  â”‚ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ: {{BUSINESS_NAME}}                        â”‚    â”‚
â”‚  â”‚ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: {{CITY}}                                       â”‚    â”‚
â”‚  â”‚ ...                                                     â”‚    â”‚
â”‚  â”‚ [Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„] [ØªØ¹Ø¯ÙŠÙ„]                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  ğŸš¦ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Ø·Ù„Ø¨Ø§Øª/Ø¯Ù‚ÙŠÙ‚Ø©:  [10  ]                                    â”‚    â”‚
â”‚  â”‚ Ø·Ù„Ø¨Ø§Øª/ÙŠÙˆÙ…:    [1000]                                    â”‚    â”‚
â”‚  â”‚ ØªÙƒÙ„ÙØ© ØªÙ‚Ø¯ÙŠØ±ÙŠØ©/Ø·Ù„Ø¨: [0.50] SAR                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: 1,234                                   â”‚    â”‚
â”‚  â”‚ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Tokens: 5.2M                                     â”‚    â”‚
â”‚  â”‚ Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠØ©: 617 SAR                              â”‚    â”‚
â”‚  â”‚ [Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙƒØ©]                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚                                    [Ø¥Ù„ØºØ§Ø¡] [ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ù…Ù„ (Workflow)

### 1. Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø³ÙŠØ±ÙÙŠÙ‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· "Ø³ÙŠØ±ÙÙŠÙ‡" Ø¹Ù„Ù‰ Lead                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Frontend ÙŠØ±Ø³Ù„ POST /api/survey/generate                      â”‚
â”‚    { leadId: "xxx" }                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Backend:                                                     â”‚
â”‚    a) Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ§Ù„Ø­Ø¯ÙˆØ¯                               â”‚
â”‚    b) Ø¥Ù†Ø´Ø§Ø¡ Report Ø¨Ø­Ø§Ù„Ø© PENDING                                â”‚
â”‚    c) Ø¥Ù†Ø´Ø§Ø¡ Job ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±                               â”‚
â”‚    d) Ø¥Ø±Ø¬Ø§Ø¹ { jobId, reportId }                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Background Job Processor:                                    â”‚
â”‚    a) ØªØ­Ø¯ÙŠØ« Report Ø¥Ù„Ù‰ GENERATING                               â”‚
â”‚    b) Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Lead Ù…Ù† DB                                     â”‚
â”‚    c) Ø¬Ù„Ø¨ AI Settings (System Prompt + User Template)           â”‚
â”‚    d) Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙÙŠ User Prompt                          â”‚
â”‚    e) Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù€ OpenAI API                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. OpenAI API:                                                  â”‚
â”‚    - ÙŠØ³ØªÙ‚Ø¨Ù„ System Prompt + User Prompt                         â”‚
â”‚    - ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„                                       â”‚
â”‚    - ÙŠÙØ±Ø¬Ø¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Backend - Response Parser:                                   â”‚
â”‚    a) ØªØ­Ù„ÙŠÙ„ Ø§Ø³ØªØ¬Ø§Ø¨Ø© AI                                          â”‚
â”‚    b) Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ù†Ø¸Ù…Ø© (JSON)                            â”‚
â”‚    c) ØªØ­Ø¯ÙŠØ« Report Ø¨Ø§Ù„Ù…Ø­ØªÙˆÙ‰                                     â”‚
â”‚    d) ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ COMPLETED                                â”‚
â”‚    e) ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ ÙÙŠ SurveyUsage                            â”‚
â”‚    f) Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. Frontend:                                                    â”‚
â”‚    - ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± (WebSocket/Polling)                         â”‚
â”‚    - ÙŠØ¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« Ø®Ø·Ø£:                                                   â”‚
â”‚                                                                 â”‚
â”‚ 1. Rate Limit Ù…Ù† OpenAI:                                        â”‚
â”‚    â†’ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ ÙØªØ±Ø© (exponential backoff)              â”‚
â”‚    â†’ Ø­Ø¯ Ø£Ù‚ØµÙ‰ 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª                                          â”‚
â”‚                                                                 â”‚
â”‚ 2. Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:                                              â”‚
â”‚    â†’ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©                                             â”‚
â”‚    â†’ Ø¥Ø°Ø§ ÙØ´Ù„: ØªØ­Ø¯ÙŠØ« Report Ø¥Ù„Ù‰ FAILED Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£            â”‚
â”‚                                                                 â”‚
â”‚ 3. Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± ØµØ§Ù„Ø­Ø© Ù…Ù† AI:                                     â”‚
â”‚    â†’ Ø­ÙØ¸ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ù…                                        â”‚
â”‚    â†’ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù„ÙŠÙ„ Ø¬Ø²Ø¦ÙŠ                                          â”‚
â”‚    â†’ Ø¥Ø°Ø§ ÙØ´Ù„: FAILED Ù…Ø¹ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ù… Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©                 â”‚
â”‚                                                                 â”‚
â”‚ 4. ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ÙˆØ¯:                                                â”‚
â”‚    â†’ Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨ ÙÙˆØ±Ø§Ù‹ Ù…Ø¹ Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø¶Ø­Ø©                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

```
api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ survey/                          # Ù…ÙˆØ¯ÙŠÙˆÙ„ Ø§Ù„Ø³ÙŠØ±ÙÙŠÙ‡ (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â”œâ”€â”€ survey.module.ts
â”‚   â”‚   â”œâ”€â”€ survey.controller.ts
â”‚   â”‚   â”œâ”€â”€ survey.service.ts
â”‚   â”‚   â”œâ”€â”€ survey.processor.ts          # Background job processor
â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”œâ”€â”€ create-survey.dto.ts
â”‚   â”‚   â”‚   â””â”€â”€ survey-response.dto.ts
â”‚   â”‚   â””â”€â”€ interfaces/
â”‚   â”‚       â””â”€â”€ survey-report.interface.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ai-provider/                     # Ø®Ø¯Ù…Ø© AI Provider (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â”œâ”€â”€ ai-provider.module.ts
â”‚   â”‚   â”œâ”€â”€ ai-provider.service.ts
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”œâ”€â”€ openai.provider.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ gemini.provider.ts       # Ù„Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ
â”‚   â”‚   â”‚   â””â”€â”€ base.provider.ts
â”‚   â”‚   â””â”€â”€ prompt-template.service.ts
â”‚   â”‚
â”‚   â””â”€â”€ admin/
â”‚       â”œâ”€â”€ ai-settings/                 # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI (Ø¬Ø¯ÙŠØ¯)
â”‚       â”‚   â”œâ”€â”€ ai-settings.controller.ts
â”‚       â”‚   â”œâ”€â”€ ai-settings.service.ts
â”‚       â”‚   â””â”€â”€ dto/
â”‚       â”‚       â””â”€â”€ update-ai-settings.dto.ts
â”‚       â””â”€â”€ ...

web/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â””â”€â”€ AISettingsPage.tsx           # ØµÙØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI (Ø¬Ø¯ÙŠØ¯)
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ survey/                          # Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø³ÙŠØ±ÙÙŠÙ‡ (Ø¬Ø¯ÙŠØ¯)
â”‚   â”‚   â”œâ”€â”€ SurveyButton.tsx
â”‚   â”‚   â”œâ”€â”€ SurveyProgress.tsx
â”‚   â”‚   â”œâ”€â”€ SurveyReportViewer.tsx
â”‚   â”‚   â”œâ”€â”€ sections/
â”‚   â”‚   â”‚   â”œâ”€â”€ ExecutiveSummary.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ IdentityAnchors.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DigitalFootprint.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GapAnalysis.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Priorities.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ServiceMapping.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Packages.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Competitors.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SalesEnablement.tsx
â”‚   â”‚   â”‚   â””â”€â”€ CRMCard.tsx
â”‚   â”‚   â””â”€â”€ SurveyReportExport.tsx
â”‚   â””â”€â”€ ...
```

---

## ğŸ” Ø§Ù„Ø£Ù…Ø§Ù†

### 1. ØªØ´ÙÙŠØ± API Keys

```typescript
// Ø§Ø³ØªØ®Ø¯Ø§Ù… AES-256-GCM Ù„ØªØ´ÙÙŠØ± API Keys
// Ø§Ù„Ù…ÙØªØ§Ø­ ÙŠÙØ®Ø²Ù† ÙÙŠ environment variable
// Ù„Ø§ ÙŠÙØ¹Ø±Ø¶ API Key ÙƒØ§Ù…Ù„Ø§Ù‹ ÙÙŠ Ø§Ù„Ù€ UI (ÙÙ‚Ø· Ø¢Ø®Ø± 4 Ø£Ø­Ø±Ù)
```

### 2. ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ÙˆØµÙˆÙ„

| Endpoint | SUPER_ADMIN | OWNER | ADMIN | MANAGER | SALES |
|----------|-------------|-------|-------|---------|-------|
| GET /ai-settings | âœ… | âŒ | âŒ | âŒ | âŒ |
| PUT /ai-settings | âœ… | âŒ | âŒ | âŒ | âŒ |
| POST /survey/generate | âœ… | âœ… | âœ… | âœ… | âœ… |
| GET /survey/:id | âœ… | âœ… | âœ… | âœ… | âœ… |
| GET /survey/usage | âœ… | âœ… | âœ… | âŒ | âŒ |

### 3. Rate Limiting

```typescript
// Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø¥Ø³Ø§Ø¡Ø©
@Throttle(10, 60)  // 10 Ø·Ù„Ø¨Ø§Øª/Ø¯Ù‚ÙŠÙ‚Ø© Ù„ÙƒÙ„ Ù…Ø³ØªØ®Ø¯Ù…
```

---

## ğŸ“‹ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ° (Sprints)

### Sprint 1: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (3-4 Ø£ÙŠØ§Ù…)

1. **ØªØ­Ø¯ÙŠØ« Prisma Schema**
   - Ø¥Ø¶Ø§ÙØ© AISettings model
   - ØªØ­Ø¯ÙŠØ« Report model
   - Ø¥Ø¶Ø§ÙØ© SurveyUsage model
   - ØªØ­Ø¯ÙŠØ« Plan model
   - ØªØ´ØºÙŠÙ„ migration

2. **Ø¥Ù†Ø´Ø§Ø¡ AI Provider Module**
   - Base provider interface
   - OpenAI provider implementation
   - Prompt template service

3. **Ø¥Ù†Ø´Ø§Ø¡ Survey Module**
   - Controller + Service
   - DTOs
   - Basic endpoints

### Sprint 2: Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© (2-3 Ø£ÙŠØ§Ù…)

1. **Ø¥Ø¹Ø¯Ø§Ø¯ Bull Queue**
   - ØªØ«Ø¨ÙŠØª ÙˆØªÙƒÙˆÙŠÙ† Bull
   - Ø¥Ù†Ø´Ø§Ø¡ Survey Queue
   - Survey Processor

2. **ØªÙƒØ§Ù…Ù„ Ù…Ø¹ OpenAI**
   - Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
   - Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø§Øª
   - ØªØ­Ù„ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±

3. **Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**
   - WebSocket Ø£Ùˆ Polling
   - Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù†Ø¯ Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±

### Sprint 3: ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (3-4 Ø£ÙŠØ§Ù…)

1. **ØªØ­Ø¯ÙŠØ« LeadDetailPage**
   - Ø²Ø± Ø³ÙŠØ±ÙÙŠÙ‡ Ù…Ø­Ø¯Ø«
   - Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
   - Progress indicator

2. **SurveyReportViewer**
   - Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ù†Ø¸Ù…
   - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
   - ØªØµØ¯ÙŠØ± PDF

3. **Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ**
   - Toast notifications
   - ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø­Ø§Ù„Ø©

### Sprint 4: Ù„ÙˆØ­Ø© Super Admin (2-3 Ø£ÙŠØ§Ù…)

1. **AISettingsPage**
   - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Provider
   - Ø¥Ø¯Ø§Ø±Ø© Prompts
   - Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

2. **Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„**
   - Test connection
   - Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬

3. **Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…**
   - Dashboard
   - ØªÙØ§ØµÙŠÙ„ Ø­Ø³Ø¨ Tenant

### Sprint 5: Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø± (2 Ø£ÙŠØ§Ù…)

1. **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡**
   - Retry logic
   - Error messages

2. **Ø§Ù„Ø£Ø¯Ø§Ø¡**
   - Caching
   - Optimization

3. **Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„**
   - Unit tests
   - Integration tests
   - E2E tests

---

## ğŸ“Š Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ User Prompt

| Ø§Ù„Ù…ØªØºÙŠØ± | Ø§Ù„Ù…ØµØ¯Ø± | Ø¥Ù„Ø²Ø§Ù…ÙŠ |
|---------|--------|--------|
| `{{BUSINESS_NAME}}` | lead.companyName | âœ… |
| `{{CITY}}` | lead.city | âœ… |
| `{{COUNTRY}}` | "Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©" (Ø§ÙØªØ±Ø§Ø¶ÙŠ) Ø£Ùˆ lead.country | âœ… |
| `{{INDUSTRY}}` | lead.industry | âŒ |
| `{{WEBSITE_URL}}` | lead.website | âŒ |
| `{{GMAPS_URL}}` | lead.metadata.sourceUrl | âŒ |
| `{{IG_URL}}` | lead.socialLinks.instagram | âŒ |
| `{{X_URL}}` | lead.socialLinks.twitter | âŒ |
| `{{TIKTOK_URL}}` | lead.socialLinks.tiktok | âŒ |
| `{{SNAP_URL}}` | lead.socialLinks.snapchat | âŒ |
| `{{YT_URL}}` | lead.socialLinks.youtube | âŒ |
| `{{LI_URL}}` | lead.socialLinks.linkedin | âŒ |
| `{{PHONE}}` | lead.phone | âŒ |
| `{{EMAIL}}` | lead.email | âŒ |
| `{{ADDRESS}}` | lead.address | âŒ |
| `{{LICENSE_OR_CR}}` | lead.licenseNumber | âŒ |
| `{{GOAL_HINT}}` | (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹) | âŒ |
| `{{EXTRA_CONSTRAINTS}}` | (ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹) | âŒ |

---

## âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Ø§Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:**
   - Ù„Ù† ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠ ÙƒÙˆØ¯ Ù…ÙˆØ¬ÙˆØ¯ Ø¥Ù„Ø§ Ù„Ù„ØªÙƒØ§Ù…Ù„
   - Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„ Ù…Ø³ØªÙ‚Ù„ ÙˆÙŠÙ…ÙƒÙ† ØªØ¹Ø·ÙŠÙ„Ù‡

2. **Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠ:**
   - Ø§Ù„Ø¨Ù†ÙŠØ© Ø¬Ø§Ù‡Ø²Ø© Ù„Ø¥Ø¶Ø§ÙØ© Gemini ÙˆØºÙŠØ±Ù‡
   - ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø£Ù†ÙˆØ§Ø¹ ØªÙ‚Ø§Ø±ÙŠØ± Ø¬Ø¯ÙŠØ¯Ø©

3. **Ø§Ù„Ø£Ø¯Ø§Ø¡:**
   - Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ØªÙÙ†Ø´Ø£ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
   - Ù„Ø§ ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

4. **Ø§Ù„ØªÙƒÙ„ÙØ©:**
   - ØªØªØ¨Ø¹ Ø¯Ù‚ÙŠÙ‚ Ù„Ù„Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ
   - Ø¥Ù…ÙƒØ§Ù†ÙŠØ© ÙˆØ¶Ø¹ Ø­Ø¯ÙˆØ¯ Ù„ÙƒÙ„ Ø®Ø·Ø©

---

## âœ… Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©

Ø¨Ø¹Ø¯ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø©ØŒ Ø³Ø£Ø¨Ø¯Ø£ Ø¨Ù€:
1. ØªØ­Ø¯ÙŠØ« Prisma Schema
2. Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¯ÙŠÙˆÙ„Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
3. Ø§Ù„ØªÙƒØ§Ù…Ù„ Ù…Ø¹ OpenAI
4. Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

**Ù‡Ù„ ØªÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø·Ø©ØŸ Ù‡Ù„ Ù‡Ù†Ø§Ùƒ ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø£Ùˆ Ø¥Ø¶Ø§ÙØ§ØªØŸ**
