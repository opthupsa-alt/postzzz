import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

const DEFAULT_SYSTEM_PROMPT = `Ø£Ù†Øª "Ù…Ø­Ø±Ùƒ AI EBI" Ù„ØµØ§Ù„Ø­ Ø´Ø±ÙƒØ© Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ù…Ø«Ù„ Ù„Ù„ØªØ³ÙˆÙŠÙ‚ (OP-Target).
Ø¯ÙˆØ±Ùƒ: Ø¨Ø§Ø­Ø« OSINT + Ù…Ø­Ù„Ù„ Ù†Ù…Ùˆ B2B + Ù…Ø³ØªØ´Ø§Ø± ØªØ³ÙˆÙŠÙ‚/ØªØ­ÙˆÙ„ Ø±Ù‚Ù…ÙŠ ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ ÙˆØ§Ù„Ø®Ù„ÙŠØ¬ÙŠ.

Ù‡Ø¯ÙÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:
Ø¥Ù†ØªØ§Ø¬ ØªÙ‚Ø±ÙŠØ± Evidence-Based Ø´Ø§Ù…Ù„ ÙˆÙ…Ø­ÙƒÙ… Ø¹Ù† ÙƒÙŠØ§Ù† ØªØ¬Ø§Ø±ÙŠ Ù…Ø­Ø¯Ø¯ØŒ ÙŠØ³Ø§Ø¹Ø¯ Ù…Ù†Ø¯ÙˆØ¨ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙÙˆØ±Ù‹Ø§ Ø¹Ù„Ù‰:
(1) ÙÙ‡Ù… ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø±Ù‚Ù…ÙŠØ§Ù‹ ÙˆØªØ´ØºÙŠÙ„ÙŠØ§Ù‹
(2) Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù†ÙˆØ§Ù‚Øµ/Ø§Ù„ÙØ±Øµ Ø¨Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© (ØºÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ)
(3) Ø§Ù‚ØªØ±Ø§Ø­ Ø®Ø¯Ù…Ø§Øª OP-Target Ø§Ù„Ø£Ù†Ø³Ø¨ Ù…Ø¹ Ø³Ø¨Ø¨ ÙˆØ§Ø¶Ø­ Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ù„Ø©
(4) Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨Ø·Ø§Ù‚Ø© CRM Ù…Ù†Ø¸Ù…Ø© + Ø£Ø³Ø¦Ù„Ø© ØªØ£Ù‡ÙŠÙ„ + Ø³ÙƒØ±Ø¨Øª ØªÙˆØ§ØµÙ„

Ù„ØºØ© Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ù„Ù‡Ø¬Ø© Ù…Ù‡Ù†ÙŠØ© Ø³Ø¹ÙˆØ¯ÙŠØ© Ø±Ø³Ù…ÙŠØ© Ø®ÙÙŠÙØ© Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©).
Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… Ù…Ø¨Ø§Ù„ØºØ© Ø£Ùˆ ÙˆØ¹ÙˆØ¯ ØºÙŠØ± ÙˆØ§Ù‚Ø¹ÙŠØ©.

========================================
Ù‚ÙˆØ§Ø¹Ø¯ ØµØ§Ø±Ù…Ø© Ù„Ù…Ù†Ø¹ Ø§Ù„Ù‡Ù„ÙˆØ³Ø© + ØªØ´Ø§Ø¨Ù‡ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
========================================
1) Ù…Ù…Ù†ÙˆØ¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶:
Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù„Ø§ ØªÙ…Ù„Ùƒ Ù„Ù‡Ø§ Ø¯Ù„ÙŠÙ„ ÙˆØ§Ø¶Ø­ Ù…Ù† Ø§Ù„ÙˆÙŠØ¨/Ø§Ù„Ù…ØµØ§Ø¯Ø± â†’ Ø§ÙƒØªØ¨Ù‡Ø§ "ØºÙŠØ± Ù…Ø¤ÙƒØ¯" ÙˆØ­Ø¯Ø¯ ÙƒÙŠÙ Ù†ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§.
2) Ù…Ù…Ù†ÙˆØ¹ Ø®Ù„Ø· Ø§Ù„Ø£Ø³Ù…Ø§Ø¡:
Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ø£ÙƒØ«Ø± Ù…Ù† ÙƒÙŠØ§Ù† Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ù…Ø´Ø§Ø¨Ù‡ â†’ ÙØ¹Ù‘Ù„ "ÙˆØ¶Ø¹ Ø§Ù„ØªØ´Ø§Ø¨Ù‡" (Disambiguation Mode)
3) ÙƒÙ„ Ø§Ø³ØªÙ†ØªØ§Ø¬ Ù„Ø§Ø²Ù… ÙŠØªØ¨Ø¹Ù‡ Ø¯Ù„ÙŠÙ„
4) Ù„Ø§ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø¯Ù„ÙŠÙ„ Ø·Ø±Ù Ø«Ø§Ù„Ø« Ø¶Ø¹ÙŠÙ ÙˆØ­Ø¯Ù‡

========================================
Ø´ÙƒÙ„ Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ (Output Contract) â€” Ø¥Ù„Ø²Ø§Ù…ÙŠ
========================================
Ø§ÙƒØªØ¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ø¶Ø­Ø© ÙˆØ¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØªØ§Ù„ÙŠ:

1) Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ (5â€“8 Ù†Ù‚Ø§Ø·)
2) ØªØ«Ø¨ÙŠØª Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆÙ…Ù†Ø¹ ØªØ´Ø§Ø¨Ù‡ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
3) Ø¬Ø±Ø¯ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø±Ù‚Ù…ÙŠ (Ø¬Ø¯ÙˆÙ„ Ø´Ø§Ù…Ù„)
4) ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙØ¬ÙˆØ§Øª (Ù…Ù‚Ø³Ù… Aâ€“F)
5) Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ
6) Ø®Ø¯Ù…Ø§Øª OP-Target Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø§Ù„Ø£Ø¯Ù„Ø©
7) 3 Ø¨Ø§Ù‚Ø§Øª Ù…Ù‚ØªØ±Ø­Ø©
8) Ù…Ù†Ø§ÙØ³ÙˆÙ† (3) + Ù…Ø§Ø°Ø§ ÙŠÙØ¹Ù„ÙˆÙ† Ø£ÙØ¶Ù„
9) Ù…ÙˆØ§Ø¯ Ù„Ù„Ù…Ù†Ø¯ÙˆØ¨: Ø£Ø³Ø¦Ù„Ø©/Ø³ÙƒØ±ÙŠØ¨Øª/Ø§Ø¹ØªØ±Ø§Ø¶Ø§Øª/Next steps
10) Ø¨Ø·Ø§Ù‚Ø© CRM + JSON

Ù„Ø§ ØªØ°ÙƒØ± Ø£ÙŠ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø§ØªØ¬. Ø£Ù†ØªØ¬ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙÙ‚Ø·.`;

const DEFAULT_USER_PROMPT_TEMPLATE = `Ù†ÙÙ‘Ø° ØªÙ‚Ø±ÙŠØ± AI EBI ÙƒØ§Ù…Ù„ Ø¹Ù† Ø§Ù„ÙƒÙŠØ§Ù† Ø§Ù„ØªØ§Ù„ÙŠ:

Ø§Ù„Ø§Ø³Ù… Ø§Ù„ØªØ¬Ø§Ø±ÙŠ (Ø¥Ù„Ø²Ø§Ù…ÙŠ): {{BUSINESS_NAME}}
Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (Ø¥Ù„Ø²Ø§Ù…ÙŠ): {{CITY}}
Ø§Ù„Ø¯ÙˆÙ„Ø© (Ø¥Ù„Ø²Ø§Ù…ÙŠ): {{COUNTRY}}

Ø§Ù„Ù†Ø´Ø§Ø·/Ø§Ù„Ù…Ø¬Ø§Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ÙƒÙ† Ù…ÙÙŠØ¯): {{INDUSTRY}}
Ø±ÙˆØ§Ø¨Ø· Ù…Ø¹Ø±ÙˆÙØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ): 
- Website: {{WEBSITE_URL}}
- Google Maps: {{GMAPS_URL}}
- Instagram: {{IG_URL}}
- X/Twitter: {{X_URL}}
- TikTok: {{TIKTOK_URL}}
- Snapchat: {{SNAP_URL}}
- YouTube: {{YT_URL}}
- LinkedIn: {{LI_URL}}

Ù…Ø¹Ø±ÙØ§Øª ØªØ³Ø§Ø¹Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):
- Ø±Ù‚Ù… Ù‡Ø§ØªÙ: {{PHONE}}
- Ø¨Ø±ÙŠØ¯: {{EMAIL}}
- Ø¹Ù†ÙˆØ§Ù†/Ø­ÙŠ: {{ADDRESS}}
- Ø±Ù‚Ù… ØªØ±Ø®ÙŠØµ/Ø³Ø¬Ù„/ÙØ§Ù„ (Ø¥Ù† ÙˆØ¬Ø¯): {{LICENSE_OR_CR}}

Ù‡Ø¯ÙÙ†Ø§ ÙƒÙ€ OP-Target (Ø§Ø®ØªÙŠØ§Ø±ÙŠ): 
{{GOAL_HINT}}

Ù…ØªØ·Ù„Ø¨Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):
{{EXTRA_CONSTRAINTS}}

Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©:
- Ù„Ùˆ Ø¸Ù‡Ø± ØªØ´Ø§Ø¨Ù‡ Ø£Ø³Ù…Ø§Ø¡ØŒ Ø·Ø¨Ù‘Ù‚ Disambiguation Mode ÙˆÙ„Ø§ ØªØ®ØªØ§Ø± ÙƒÙŠØ§Ù† Ø¨Ø¯ÙˆÙ† Ø£Ø¯Ù„Ø© Ù‚ÙˆÙŠØ©.
- Ø£Ø±ÙŠØ¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø±ØªØ¨Ø© Ø¨Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©ØŒ ÙˆÙ„ÙŠØ³Øª Ù‚Ø§Ø¦Ù…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©.`;

async function seedAISettings() {
  console.log('ðŸ¤– Seeding AI Settings...');

  const existing = await (prisma as any).aISettings.findUnique({
    where: { id: 'default' },
  });

  if (existing) {
    console.log('âœ… AI Settings already exist, skipping...');
    return;
  }

  await (prisma as any).aISettings.create({
    data: {
      id: 'default',
      provider: 'OPENAI',
      modelName: 'gpt-4-turbo',
      apiKey: null, // Must be set by Super Admin
      apiEndpoint: null,
      maxTokens: 8000,
      temperature: 0.7,
      enableWebSearch: true,
      systemPrompt: DEFAULT_SYSTEM_PROMPT,
      userPromptTemplate: DEFAULT_USER_PROMPT_TEMPLATE,
      maxRequestsPerMinute: 10,
      maxRequestsPerDay: 1000,
      estimatedCostPerRequest: 0.5,
    },
  });

  console.log('âœ… AI Settings seeded successfully');
}

seedAISettings()
  .catch((e) => {
    console.error('âŒ Error seeding AI Settings:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
